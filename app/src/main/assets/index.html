<html>
    <head>
        <script src="Query.js"></script>
        <script src="ConfigButton.js"></script>
        <script src="RfcommControls.js"></script>
    </head>
    <body>
        <input type="button" value="Install package..." onClick="install()" />
        <input type="button" value="List Bluetooth devices" onClick="listBT()" />
        <input type="button" value="ls" onClick="ls()" />
        <div id="div_controls"></div>
        <textarea id="ta_log" rows=20></textarea>
        <script type="text/javascript">

var div_controls = document.getElementById("div_controls");
var ta = document.getElementById("ta_log");
ta.style.width="100%";

function log(str) {
    ta.value = ta.value + str + "\n";
}

query = new Query();

function install() {
    query.query({cmd: "install"});
}

let rf = new RfcommControls(function(obj, callback) {query.query(obj, callback);});
div_controls.appendChild(rf.div);

function listBT() {
    rf.show();
}

function ls() {
    query.query({cmd: "exec", args: ["sh", "-c", "ls"]});
}

query.query({cmd: "ready", msg: "Hi!"});

        </script>
    </body>
</html>

